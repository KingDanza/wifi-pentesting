import subprocess
import time
import os
import colorama
from colorama import Fore, Style
import random
import sys

import config
xIface = config.interface

#print(xIface)
########################################################################
cyel = Fore.LIGHTYELLOW_EX
cred = Fore.LIGHTRED_EX
cgreen = Fore.LIGHTGREEN_EX
ccyan = Fore.LIGHTCYAN_EX
cwhite = Fore.LIGHTWHITE_EX
cmagenta = Fore.LIGHTMAGENTA_EX
cyel1 = Fore.YELLOW
cred1 = Fore.RED
cgreen1 = Fore.GREEN
ccyan1 = Fore.CYAN
cwhite1 = Fore.WHITE
cmagenta1 = Fore.MAGENTA
creset = Style.RESET_ALL
font_list = [cmagenta, cwhite, ccyan, cred, cyel, cgreen, cmagenta1, cwhite1, ccyan1, cred1, cyel1, cgreen1]
#xf1 = random.choice(font_list)
xf1 = Fore.WHITE
########################################################################
def banner():
    print(cyel + '''
██╗    ██╗██████╗  █████╗     ██████╗  ██████╗  ██████╗ ███╗   ███╗     ██╗    ██████╗ 
██║    ██║██╔══██╗██╔══██╗    ██╔══██╗██╔═══██╗██╔═══██╗████╗ ████║    ███║   ██╔═████╗
██║ █╗ ██║██████╔╝███████║    ██║  ██║██║   ██║██║   ██║██╔████╔██║    ╚██║   ██║██╔██║
██║███╗██║██╔═══╝ ██╔══██║    ██║  ██║██║   ██║██║   ██║██║╚██╔╝██║     ██║   ████╔╝██║
╚███╔███╔╝██║     ██║  ██║    ██████╔╝╚██████╔╝╚██████╔╝██║ ╚═╝ ██║     ██║██╗╚██████╔╝
 ╚══╝╚══╝ ╚═╝     ╚═╝  ╚═╝    ╚═════╝  ╚═════╝  ╚═════╝ ╚═╝     ╚═╝     ╚═╝╚═╝ ╚═════╝ 
                                                                                       '''+ xf1)
########################################################################
def clear():
    os.system('clear')  # on Windows System

def mainMenu():
    
    CURL = config.formats
    banner()
    print(89 * "_")
    print('''|[''' + cyel + '''1''' + Style.RESET_ALL + ''']  ''' + cgreen + '''Kill Processes & Enable Moniter Mode''' + Style.RESET_ALL + '''       | Welcome to ''' + cred1 + '''WPA Doom 1.0''' + Style.RESET_ALL + ''' by Danza.    |
''' + xf1 + '''|[''' + cyel + '''2''' + Style.RESET_ALL + ''']  ''' + cred1 + '''Disable Moniter Mode & Enable Networking''' + Style.RESET_ALL + '''   | This is my first real attempt at     |
''' + xf1 + '''|[''' + cyel + '''3''' + Style.RESET_ALL + ''']  Random MAC Address                      ''' + Style.RESET_ALL + '''   | making any pentesting tools, so it's |
''' + xf1 + '''|[''' + cyel + '''4''' + Style.RESET_ALL + ''']  Restore MAC Address (''' + cyel + config.mac + Style.RESET_ALL +''') ''' + Style.RESET_ALL + '''   | no where close to perfect. Make sure |
''' + xf1 + '''|[''' + cyel + '''5''' + Style.RESET_ALL + ''']  Discover Networks (''' + cyel + config.interface + Style.RESET_ALL +''')                  | you edit the config file in the same |
''' + xf1 + '''|[''' + cyel + '''6''' + Style.RESET_ALL + ''']  Capture Handshake''' + Style.RESET_ALL + '''                          | folder this script is located. It's  |
''' + xf1 + '''|[''' + cyel + '''7''' + Style.RESET_ALL + ''']  ''' + CURL + '''Deauth AP (do not use this function)''' + Style.RESET_ALL + '''       | needed to run the tools.             |
''' + xf1 + '''|[''' + cyel + '''8''' + Style.RESET_ALL + ''']  Cap2hccapx Conversion''' + Style.RESET_ALL + '''                      |                                      |
''' + xf1 + '''|[''' + cyel + '''9''' + Style.RESET_ALL + ''']  Hashcat WPA Crack (mask only)''' + Style.RESET_ALL + '''              | To make sure you have all required   |
''' + xf1 + '''|[''' + cyel + '''10''' + Style.RESET_ALL + '''] Hashcat WPA Crack (wordlist only)''' + Style.RESET_ALL + '''          | tools run option [''' + cyel + '''15''' + Style.RESET_ALL + ''']                |
''' + xf1 + '''|[''' + cyel + '''11''' + Style.RESET_ALL + '''] Restore Hashcat Session''' + Style.RESET_ALL + '''                    |                                      |
''' + xf1 + '''|[''' + cyel + '''12''' + Style.RESET_ALL + '''] Crack With ''' + cgreen + '''Aircrack-ng''' + Style.RESET_ALL + ''' ''' + Style.RESET_ALL + '''                    | This script is and will be buggy & I |
''' + xf1 + '''|[''' + cyel + '''13''' + Style.RESET_ALL + '''] Edit Config File       ''' + Style.RESET_ALL + '''                    | am working my best to fix things.    |
''' + xf1 + '''|[''' + cyel + '''14''' + Style.RESET_ALL + '''] Exit Script (use option [''' + cyel + '''2''' + Style.RESET_ALL + '''] first)      ''' + Style.RESET_ALL + '''   |                                      |
''' + xf1 + '''|[''' + cyel + '''15''' + Style.RESET_ALL + '''] Download Requirements  ''' + Style.RESET_ALL + '''                    |                                      |
''' + xf1 + '''|[''' + cyel + '''16''' + Style.RESET_ALL + '''] Go To Next Page        ''' + Style.RESET_ALL + '''                    | Email: ''' + cyel + '''Z0neyDanza@yopmail.com''' + Style.RESET_ALL + '''        |''')
    print(51 * "‾‾")
    tt = input(Style.RESET_ALL + "["+ cyel + "!" + Style.RESET_ALL + "] Make your choice: ")
    if tt == "1":
        command = "sudo airmon-ng check kill"
        print(command)
        subprocess.call(command, shell=True)
        command = "sudo airmon-ng start " + xIface + ""
        print(command)
        subprocess.call(command, shell=True)
        mainMenu()
    elif tt == "2":
        command = "sudo airmon-ng stop " + xIface + "mon"
        print(command)
        subprocess.call(command, shell=True)
        command = "sudo service NetworkManager restart"
        print(command)
        subprocess.call(command, shell=True)
        mainMenu()        
    elif tt == "3":
        randomMAC()
    elif tt == "4":
        restoreMAC()          
    elif tt == "5":
        #command = "sudo airodump-ng " + xIface + "mon"
        command = "sudo xterm -hold -geometry 103x70+0+0 -e airodump-ng " + xIface + "mon &"
        #print(command)
        subprocess.call(command, shell=True)
        mainMenu()


        
    elif tt == "6":
        fn = input("Name for capture file: ")
        chan = input("Channel of AP: ")
        bssidd = input("BSSID of AP: ")
        command = "sudo xterm -geometry 103x20+0+0 -e airodump-ng -w " + fn + " -c " + chan + " --bssid " + bssidd + " " + xIface + "mon &"
        command2 = "sudo xterm -geometry 103x49+0+560 -e aireplay-ng --deauth 0 -a " + bssidd + " " + xIface + "mon &"
        subprocess.call(command, shell=True)
        time.sleep(2)
        subprocess.call(command2, shell=True)
        mainMenu()


        
    elif tt == "7":
        #bssidd = input("BSSID of AP: ")
        #command = "sudo aireplay-ng --deauth 0 -a " + bssidd + " " + xIface + "mon"
        #command = "sudo aireplay-ng --deauth 0 -a " + bssidd + " " + xIface + "mon"
        #print(command)
        #subprocess.call(command, shell=True)
        mainMenu()  
    elif tt == "8":
        cappath = input("Handshake path: ")
        hcapname = input("Coverted name (no extension): ")
        command = "sudo /usr/share/hashcat-utils/cap2hccapx.bin " + cappath + " " + hcapname + ".hccapx"
        #print(command)
        subprocess.call(command, shell=True)
        mainMenu()
    elif tt == "9":
        hcappath = input("Hccapx path: ")
        wlist = input("Wordlist path or hashcat charset: (?l?l?l?l?l?d?d?d) ")
        command = "sudo hashcat --potfile-disable -o crack.txt -m 22000 -a 3 " + hcappath + " " + wlist + ""
        print(command)
        subprocess.call(command, shell=True)
        mainMenu()
        
  
    elif tt == "10":
        print("[" + cyel + "!" + Style.RESET_ALL + "] Sorry, function unavailable.")
        time.sleep(2)
        mainMenu()
        
    elif tt == "11":
        restoreHash()     
    elif tt == "12":
        bssidd = input("BSSID of AP: ")
        cappath = input("Capture path: ")
        wlist = input("Wordlist path: ")
        #command = "sudo aircrack-ng -b " + bssidd + " -w " + wlist + " " + cappath + ""
        command = "sudo xterm -hold -geometry 82x21+0+0 -e aircrack-ng -b " + bssidd + " -w " + wlist + " " + cappath + " &"
        subprocess.call(command, shell=True)
    elif tt == "13":
        print("[" + cyel + "!" + Style.RESET_ALL + "] Sorry, function unavailable.")
        time.sleep(2)
        mainMenu()
    elif tt == "14":
        print("[" + cyel + "!" + Style.RESET_ALL + "] Sorry, function unavailable.")
        time.sleep(2)
        mainMenu()       
    elif tt == "15":
        command = "git clone https://github.com/hacker3983/how-to-install-pyrit-on-kali-linux-2020.1a pyrit-installer && cd pyrit-installer && sudo bash install.sh"
        print(command)
        command = "cd"
        print(command)
        subprocess.call(command, shell=True)
        command = "git clone https://github.com/v1s1t0r1sh3r3/airgeddon.git"
        print(command)
        subprocess.call(command, shell=True)
        command = "cd"
        print(command)
        subprocess.call(command, shell=True)
        command = "git clone https://github.com/derv82/wifite2.git"
        print(command)
        subprocess.call(command, shell=True)
        mainMenu()
    elif tt == "16":
        clear()
        mainMenu2()

        
def randomMAC():
    command = "sudo macchanger -r eth0"
    #print(command)
    subprocess.call(command, shell=True)
    time.sleep(2)
    mainMenu()

def restoreMAC():
    command = "sudo macchanger -p eth0"
    #print(command)
    subprocess.call(command, shell=True)
    time.sleep(2)
    mainMenu()
    
def restoreHash():
        clear()
        command = "sudo hashcat --restore"
        #print(command)
        subprocess.call(command, shell=True)
        print(40 * "-")
        mainMenu()


def installALL():
    command = "sudo apt update"
    print(cyel + command + Style.RESET_ALL)
    subprocess.call(command, shell=True)

    command = "sudo apt full-upgrade -y"
    print(cyel + command + Style.RESET_ALL)
    subprocess.call(command, shell=True)

    command = "sudo apt-get install gedit"
    print(cyel + command + Style.RESET_ALL)
    subprocess.call(command, shell=True)

    command = "sudo apt-get install idle3"
    print(cyel + command + Style.RESET_ALL)
    subprocess.call(command, shell=True)

    command = "sudo git clone https://github.com/hacker3983/how-to-install-pyrit-on-kali-linux-2020.1a pyrit-installer && cd pyrit-installer && sudo bash install.sh"
    print(cyel + command + Style.RESET_ALL)
    subprocess.call(command, shell=True)

    command = "sudo git clone https://github.com/v1s1t0r1sh3r3/airgeddon.git"
    print(cyel + command + Style.RESET_ALL)
    subprocess.call(command, shell=True)

    command = "sudo git clone https://github.com/derv82/wifite2.git"
    print(cyel + command + Style.RESET_ALL)
    subprocess.call(command, shell=True)

    command = "sudo apt install hcxdumptool"
    print(cyel + command + Style.RESET_ALL)
    subprocess.call(command, shell=True)

    command = "sudo apt install hcxtools"
    print(cyel + command + Style.RESET_ALL)
    subprocess.call(command, shell=True)






def mainMenu2():
    banner()
    print(89 * "_")
    print(
            '''|[''' + cyel + '''17''' + Style.RESET_ALL + '''] Update Kali''' + Style.RESET_ALL + '''                                | Welcome to ''' + cred1 + '''WPA Doom 1.0''' + Style.RESET_ALL + ''' by Danza.    |
''' + xf1 + '''|[''' + cyel + '''18''' + Style.RESET_ALL + '''] Install Gedit''' + Style.RESET_ALL + '''                              | This is my first real attempt at     |
''' + xf1 + '''|[''' + cyel + '''19''' + Style.RESET_ALL + '''] Install IDLE for Python3''' + Style.RESET_ALL + '''                   | making any pentesting tools, so it's |
''' + xf1 + '''|[''' + cyel + '''20''' + Style.RESET_ALL + '''] Install Pyrit''' + Style.RESET_ALL + '''                              | no where close to perfect. Make sure |
''' + xf1 + '''|[''' + cyel + '''21''' + Style.RESET_ALL + '''] Install Airgeddon''' + Style.RESET_ALL + '''                          | you edit the config file in the same |
''' + xf1 + '''|[''' + cyel + '''22''' + Style.RESET_ALL + '''] Install Wifite''' + Style.RESET_ALL + '''                             | folder this script is located. It's  |
''' + xf1 + '''|[''' + cyel + '''23''' + Style.RESET_ALL + '''] Install All Packages''' + Style.RESET_ALL + '''                       | needed to run the tools.             |
''' + xf1 + '''|[''' + cyel + '''24''' + Style.RESET_ALL + '''] Go Back''' + Style.RESET_ALL + '''                                    |                                      |
''' + xf1 + '''|[''' + cyel + '''!!''' + Style.RESET_ALL + ''']  ''' + Style.RESET_ALL + '''                                          | To make sure you have all required   |
''' + xf1 + '''|[''' + cyel + '''!!''' + Style.RESET_ALL + ''']  ''' + Style.RESET_ALL + '''                                          | tools run option [''' + cyel + '''15''' + Style.RESET_ALL + ''']                |
''' + xf1 + '''|[''' + cyel + '''!!''' + Style.RESET_ALL + ''']  ''' + Style.RESET_ALL + '''                                          |                                      |
''' + xf1 + '''|[''' + cyel + '''!!''' + Style.RESET_ALL + ''']  ''' + Style.RESET_ALL + '''                                          | This script is and will be buggy & I |
''' + xf1 + '''|[''' + cyel + '''!!''' + Style.RESET_ALL + ''']  ''' + Style.RESET_ALL + '''                                          | am working my best to fix things.    |
''' + xf1 + '''|[''' + cyel + '''!!''' + Style.RESET_ALL + ''']  ''' + Style.RESET_ALL + '''                                          |                                      |
''' + xf1 + '''|[''' + cyel + '''!!''' + Style.RESET_ALL + ''']  ''' + Style.RESET_ALL + '''                                          |                                      |
''' + xf1 + '''|[''' + cyel + '''32''' + Style.RESET_ALL + ''']  Info/Read Me''' + Style.RESET_ALL + '''                              | Email: ''' + cyel + '''Z0neyDanza@yopmail.com''' + Style.RESET_ALL + '''        |''')
    print(51 * "‾‾")
    tt = input(Style.RESET_ALL + "["+ cyel + "!" + Style.RESET_ALL + "] Make your choice: ")
    if tt == "17":
        command = "sudo apt update"
        print(command)
        subprocess.call(command, shell=True)
        command = "sudo apt full-upgrade -y"
        print(command)
        subprocess.call(command, shell=True)
        time.sleep(2)
        mainMenu2()
        
    elif tt == "18":
        command = "sudo apt-get install gedit"
        print(command)
        subprocess.call(command, shell=True)
        time.sleep(2)
        mainMenu2()
        
    elif tt == "19":
        command = "sudo apt-get install idle3"
        print(command)
        subprocess.call(command, shell=True)
        time.sleep(2)
        mainMenu2()
        
    elif tt == "20":
        command = "sudo git clone https://github.com/hacker3983/how-to-install-pyrit-on-kali-linux-2020.1a pyrit-installer && cd pyrit-installer && sudo bash install.sh"
        print(command)
        subprocess.call(command, shell=True)
        time.sleep(2)
        mainMenu2()
        
    elif tt == "21":
        command = "sudo git clone https://github.com/v1s1t0r1sh3r3/airgeddon.git"
        print(command)
        subprocess.call(command, shell=True)
        time.sleep(2)
        mainMenu2()
        
    elif tt == "22":
        command = "sudo git clone https://github.com/derv82/wifite2.git"
        print(command)
        subprocess.call(command, shell=True)
        time.sleep(2)
        mainMenu2()
        
    elif tt == "23":
        installALL()
        time.sleep(2)
        mainMenu2()
        
    elif tt == "24":
        mainMenu()

    elif tt == "32":
        clear()
        print('''[''' + cyel + '''April 13th 2021 @ 11:31am EST''' + Style.RESET_ALL + ''']
If you're reading this, thank you for giving this script a chance. Not everything here
is going to work perfectly, it's a work in progress. Make sure you edit the config file
that was provided with this script. You'll need to add your MAC address and your wireless
interface. The MAC address so you can randomize your MAC, and restore it back to normal
and your wireless interface so you can enter moniter mode to grab handshakes. I'll be
updating this when I can, but I'm no professional programmer, I just do it for fun.

[''' + cyel + '''April 14th 2021 @ 2:00am EST''' + Style.RESET_ALL + ''']
There is a bit of an issue when using the ''' + cgreen + '''Aircrack-ng''' + Style.RESET_ALL + ''' method. After you start it, you
can't end it for some reason. Not sure why currently, but I'm looking in to fixing it.

[''' + cyel + '''April 14th 2021 @ 1:49pm EST''' + Style.RESET_ALL + ''']
Added Xterm support, so now you shouldn't need to open any additional windows manually to
run any option. Options [6] and [7] are now combined, so just use option [6] to deauth and
collect the handshake. Both will open in their own Xterm window.
''')
        print(40 * "-")
        input("Press [" + cyel + "ENTER" + Style.RESET_ALL + "] to go back.")
        mainMenu2()
        
#mainMenu()


if __name__ == '__main__':
    try:
        mainMenu()
    except KeyboardInterrupt:
        print("\nOh, you think you can just Ctrl+C ME?!")
        input("y/n: ")
        print('''___________________________________
|Lol thanks for using WPA Doom 1.0|
‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾''')
        try:
            sys.exit(0)
        except SystemExit:
            os._exit(0)
